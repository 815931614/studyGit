# 线程编程(Thread)

### 线程基本概念

1. 什么是线程
   1. 线程被称为轻量级的进程
   2. 线程可以使用计算机多个资源，是多任务编程方式
   3. 线程时系统分配内核的最小单元
   4. 线程可以理解为进程的分支任务
2. 线程特征
   1. 一个进程中可以包含多个线程
   2. 线程也是一个运行行为，消耗计算机资源
   3. 一个进程中的所有线程共享这个进程的资源
   4. 多个线程之间的运行互不影响各自运行
   5. 线程的创建和销毁消耗资源远小于进程
   6. 各个线程也有自己的ID等特征

### threading 模块创建线程

1. 创建线程对象

   ```
   from threading import Thread
   
   t = Thread()
   功能: 创建线程对象
   参数：target绑定线程函数
   			args 元祖 给线程函数位置传参
   			kwargs 字典 给线程函数键值传参
   ```

2. 启动线程

   ```
   t.start()
   ```

3. 回收线程

   ```
   t.join([timeout])
   ```

线程对象属性

``` 
t.name 线程名称
t.setName() 设置线程名称
t.getName() 获取线程名称

t.is_alive() 查看线程是否在生命周期

t.daemon 设置主线程和分支线程的退出关系
t.setDaemon() 设置daemon属性值
t.isDaemon() 查看daemon属性值
 	daemon 为True时主线程退出分支线程也退出。要在start前设置，通常不和join一起使用
```

### 自定义线程类

1. 创建步骤
   1. 继承Thread类
   2. 重写\__init__方法添加自己的属性，使用super加载父类属性
   3. 重写run方法
2. 使用方法
   1. 实例化对象
   2. 调用start自动执行run方法
   3. 调用join回收线程

#### 同步互斥

#### 线程间通信方法

1. 通信方法

   线程间使用全局变量进行通信

2. 共享资源争夺

   - 共享资源：多个进程或着线程都可以操作的资源称为共享资源。对共享资源的操作代码称为临界区。
   - 影响：对共享资源的无序操作可能会带来数据的混乱，或者操作错误。此时往往需要同步互斥机制协调操作顺序。

3. 同步互斥机制

   同步：同步一种协作关系，为完成操作，多进程或者线程间形成一种协调，按照必要的步骤有序执行操作。

   互斥：互斥是一种约束关系，当一个进程或者线程占有资源时会进行加琐处理，此时其他进程就无法操作该资源，直到解锁后才能操作