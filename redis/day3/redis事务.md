### 一、结合关系型数据库的事务来看看Redis中事务有什么不同

- Redis事务是指将多条命令加入[队列](https://so.csdn.net/so/search?q=队列&spm=1001.2101.3001.7020)，一次批量执行多条命令，每条命令会按顺序执行，事务执行过程中不会受客户端传入的命令请求影响。

- 总结说：Redis事务就是一次性、顺序性、排他性的执行一个队列中的一系列命令
- Redis事务和关系型数据库的事务不太一样，它不保证原子性，也没有隔离级别的概念。
  1. Redis事务没有隔离级别的概念
     - 批量操作在发送 EXEC 命令前被放入队列缓存，并不会被实际执行，也就不存在事务内的查询要看到事务里的更新，事务外查询不能看到。
  2. Redis不保证原子性
     - Redis中，单条命令是原子性执行的，但事务不保证原子性，且没有回滚。事务中任意命令执行失败，其余的命令仍会被执行。
- 一个事务从开始到执行会经历以下三个阶段：
  1. 第一阶段：开始事务
  2. 第二阶段：命令入队
  3. 第三阶段、执行事务。
- Redis事务的相关命令如下：
  - MULTI：标识一个事务的开启，即开启事务；
  - EXEC：执行事务中的所有命令，即提交；
  - DISCARD：放弃事务；和回滚不一样，Redis事务不支持回滚。
  - WATCH：监视Key改变，用于实现乐观锁。如果监视的Key的值改变，事务最终会执行失败。
  - UNWATCH：放弃监视。